@model EcoHotels.Core.Domain.Value_objects.SearchResultHotel
@{
    ViewBag.Title = Model.Name;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAmNGdNSbyLoOn8n2GycRISMlh0X71CjGY&sensor=false" type="text/javascript"></script>
}

                <style>
                    div.thumbs li {
                    float: left;
                    _display: inline;
                    position: relative;
                    cursor: pointer;
                    border-top: 9px solid white;
                    list-style-type: none;
                    }        
                </style>

<div id="view" class="container" data-view="hotel" data-action="view">


    <div class="row">
        <!--<div class="span8" style="padding: 20px;">-->
        <div class="span8">
            <div style="padding: 20px;">
                <h1>@Model.Name</h1>
                <p><i>@Model.City, @Model.Country</i> (<a href="http://maps.google.com/?q=@Model.Address, @Model.Zipcode @Model.City, @Model.Country" target="_blank">map</a>)</p>

                <!--
                <img src="/assets/img/hotels/1.png" style="width: 580px; height: 358px;" /> 
                -->
                <img id="large-hotel-photo" src="@Model.Photos.First()" style="width: 580px; height: 358px;" alt="" /> 

                <div id="thumbnails" class="thumbs">
	                <ul class="clearfix unstyled">
                        <li class="selected odd">
		                    <img src="@Model.Thumbnails.ElementAt(0)" data-large-photo-url="@Model.Photos.First()" width="77" height="44" alt="">
	                    </li>
                        @for (var i = 1; i < Model.Thumbnails.Count(); i++)
                        { 
                        <li class="even">
		                    <img src="@Model.Thumbnails.ElementAt(i)" data-large-photo-url="@Model.Photos.ElementAt(i)" width="77" height="44" alt="" />
	                    </li>                        
                        }

                        <!--
		                <li data-index="2" class=" odd" data-type="img">
		                    <img src="/assets/img/hotels/thumb3.jpg" width="77" height="44" alt="">
	                    </li>
                        <li data-index="0" class="selected odd" data-type="img">
		                    <img src="/assets/img/hotels/thumb1.jpg" width="77" height="44" alt="">
	                    </li>
                        <li data-index="1" class=" even" data-type="img">
		                    <img src="/assets/img/hotels/thumb2.jpg" width="77" height="44" alt="">
	                    </li>
		                <li data-index="2" class=" odd" data-type="img">
		                    <img src="/assets/img/hotels/thumb3.jpg" width="77" height="44" alt="">
	                    </li>
                        
                        <li data-index="0" class="selected odd" data-type="img">
		                    <img src="/assets/img/hotels/thumb1.jpg" width="77" height="44" alt="">
	                    </li>
                        <li data-index="1" class=" even" data-type="img">
		                    <img src="/assets/img/hotels/thumb2.jpg" width="77" height="44" alt="">
	                    </li>
                        -->
                    </ul>
                </div>


                <br /><br />
                <ul class="nav nav-tabs" id="myTab">
                  <li class="active"><a href="#home">Overview</a></li>
                  <li><a id="maps" href="#profile">Maps & Attractions</a></li>
                  <li><a href="#messages">Room Details</a></li>
                  <li><a href="#settings">Policies</a></li>
                  <li><a href="#member-reviews">Member reviews</a></li>
                </ul>

                <div class="tab-content">
                  <div class="tab-pane active" id="home">
                        <h2 style="font-weight: 200;">About the hotel</h2>
                        <p>
                        @Html.Raw(Html.Encode(Model.About).Replace("\n", "<br />"))
                        </p>

                        <h2 style="font-weight: 200;">Amenities</h2>
                        <ul>
                           @foreach (var item in Model.Amenities)
                           { 
                            <li>@item</li>
                           } 
                        </ul>

                        <h2 style="font-weight: 200;">Contact</h2>

                        <address>
                        @Model.Name<br />
                        @Model.Address<br />
                        @Model.Zipcode @Model.City<br />
                        @Model.Country<br />
                        <abbr title="Phone">P:</abbr> @Model.PhoneNumber
                        </address>

                        

                        <!--
                        <p>
                        Hotel Das Cataratas is one of the latest luxury hotels to (re-)open in the soon-to-be Olympic capital. 
                        Fresh from a major restoration and refurbishment, the Belle Epoque property houses 294 rooms, some on two levels in 
                        rooftop turrets, and a David Collins-designed bar and restaurant. But the showstopper is Espa Life, a four-story 
                        "next-generation" spa with an amphitheater sauna.
                        </p>
        <p>
        London has witnessed an incredible number of luxury hotel (re-)openings of late, but the Corinthia is a standout for the flagship Espa Life, interiors by David Collins, a seafood restaurant by flamboyant Roman restaurateur Massimo Riccioli and a history of aristocrats and spies. (It was once home to the Ministry of Defence.) 
        </p>
        <p>
        The elegant lobby shows off a dramatic Baccarat "Full Moon" chandelier and bespoke artwork.The approach to the hotel along the Thames Embankment is rather charmless, but the stone building on Whitehall Place is reassuringly colossal. On entering I am confronted by a magnificent Baccarat “Full Moon” chandelier and resin panels of the Thames by the art collective Based Upon. Eye-catching artwork is a feature of all the public areas — look out for London-based Claire Brewster’s ingenious cutout birds created from vintage maps. 
        </p>
        <p>
        This quirky Bassoon Bar was unjustly empty on my visit, but it is worth a stop for the creative cocktail menu and proficient bartenders. The Northall, where the Michelin-starred Gary Holliheed champions British produce, was also on the quiet side, but the staff is friendly and forthcoming. I happily ate salmon smoked over calvados and sole meunière, while a couple looked sheepish as their young daughter rolled around on the floor.
        </p>
        <p>
        All 294 guestrooms are spacious by London standards, with beds dressed in cloud-like duvets and views over the city or to the interior courtyard. The Italian-made marble bathrooms have enormous walk-in showers, deep tubs and in-wall TVs. For alternative relaxation, however, make for the 35,000-square-foot Espa Life complex. Beginning on a mysterious mezzanine level, it descends through four ever-darkening floors to a phenomenal thermal suite. Back in the real world for breakfast at the sunlit Northall, I was left wondering what I could sell on eBay to cover the $5,700 annual membership.
        </p>
        -->
                  </div>
                  <div class="tab-pane" id="profile">
                        <h2>How to get there</h2>
                        <p>
                            Flights are available to London Heathrow Airport (LHR) from major U.S. cities on a variety of carriers. The property does not offer private transfers to/from LHR, about 17 miles away, or London Gatwick Airport (LGW), about 29 miles away. Alternatively, taxis are available to/from LHR for approximately $229, each way, and to/from LGW for approximately $294, each way. Alternatively, dedicated airport trains run from all airports except LTN and are much cheaper, costing from about $26, each way, depending on the airport. Check out Heathrow Express and Gatwick Express for prices and times.                
                        </p>

                        <div id="google-map" style="width: 580px; height: 360px;" data-hotel-address="@Model.Address, @Model.Zipcode @Model.City, @Model.Country" data-hotel-region="dk">
                
                        </div>          
                  </div>
                  <div class="tab-pane" id="messages">

                  @foreach (var room in Model.Rooms)
                  { 
                        <h2>@room.Name</h2>

                        <h3>Room Details</h3>
                        <ul>
                        <li>Superior King Rooms are approximately 344 square feet and feature city and inner courtyard views.</li>
                        <li>Maximum Occupancy: Two (Rates quoted are for two people, including children.)</li>
                        <li>Bed Type: One King</li>
                        <li>Children Policy: Children 17 and under are permitted within maximum occupancy for no additional cost using existing bedding or a complimentary crib.</li>
                        <li>Handicap-Accessible: Limited availability. After booking, please indicate any requests in the Special Instructions field on the page immediately following purchase; call 877-JSET-USA for any additional questions.</li>        
                        </ul>                  
                  }
          
                  </div>
                  <div class="tab-pane" id="settings">
                    <h3>Policies</h3>
                    <ul>
                        <li>Minimum Check-In Age: @Model.MinimumCheckInAge</li>
                        <li>Transfer Policy: The property does not offer private transfers to/from London Heathrow Airport (LHR), about 17 miles away, or London Gatwick Airport (LGW), about 29 miles away. Alternatively, taxis are available to/from LHR for approximately $229, each way, and to/from LGW for approximately $294, each way. Alternatively, dedicated airport trains run from all airports except LTN and are much cheaper, costing from about $26, each way, depending on the airport. Check out Heathrow Express and Gatwick Express for prices and times.</li>
                        <li>Pet Policy: Pets are not permitted.</li>
                        <li>Internet Access: Complimentary WiFi</li>
                        <li>Smoking Policy: Smoking is permitted in some guestrooms. Please highlight specific requirements in the Special Instructions field after purchase.</li>
                        <li>Rates quoted for additional fees and services are subject to change due to currency conversion.</li>
                        <li>All taxes and fees imposed by the property, unless otherwise stated, will be added at the time of purchase on Jetsetter. Guests are responsible for all incidental charges during their stay (e.g., additional person fees, room service, minibar, in-room movies, etc.). </li>
                    </ul>

                    <hr />

                    <h3>Check in & Check out</h3>
                    <ul>
                        <li>Check in: @Model.CheckIn</li>
                        <li>Check out: @Model.CheckOut  </li>
                        <li>Minimum stay: @Model.MinimumStay night(s)</li>
                    </ul>

                  </div>
                  <div class="tab-pane" id="member-reviews">
                  </div>
                </div>

            </div>

        </div>

        <!--<div id="sidebar" class="span4" style="width: 250px;">-->
        <div id="sidebar" class="span4">

            <div id="calendars">
                <form id="calendars-form" action="@Url.Action("search", "hotel", new { lang = "en" })" method="post" style="margin:0px;">
                    <div>
                        @Html.AntiForgeryToken()
                        @Html.HiddenFor(x => x.HotelId, new { @readonly = "true" })
                    </div>
                    <div class="calendar-text clearfix">
                        <label>Check-in</label> 
                        <div class="controls">
                            
                            <input type="text" id="check-in" value="@Model.Arrival.ToString("dd MMMM, yyyy")" data-date="@Model.Arrival.ToString("d")" readonly="readonly" />
                        </div>  
                    </div>
                    <div id="calendar-check-in" class="calendar">
                        <center style="padding: 10px 0;">Now select the day you'd like to check in</center>
                        <div id="datepicker" ></div>
                    </div>

                    <div class="calendar-text clearfix">
                        <label>Check-out</label>
                        <div class="controls">
                            <input type="text" id="check-out" value="@Model.Departure.ToString("dd MMMM, yyyy")" data-date="@Model.Departure.ToString("d")" readonly="readonly" />
                        </div>                    
                    </div>
                    <div id="calendar-check-out" class="calendar">
                        <center style="padding: 10px 0;">Now select the day you'd like to check out</center>
                        <div id="datepicker2" ></div>
                    </div>
                </form>
            </div>

            <div style="margin: 12px;">
                @if (Model.HasAvailableRooms)
                {
                    <h2>Available rooms</h2>
                    <form id="reservate-form" action="@Url.Action("index", "hotel", new { lang = "en" })" method="post">
                        <div>
                            @Html.AntiForgeryToken()
                        </div>
                        <div id="search-result">

                        @for (var i = 0; i < Model.Rooms.Count(); i++)
                        {
                            var room = Model.Rooms.ElementAt(i);
                            
                            
                            @Html.Hidden("Items[" + i + "].RoomTypeId", room.RoomTypeId)
                            
                            if (room.IsAvailable)
                            { 
                            <div class="roomtype" style="width: 276px;">
                                <h3>@room.Name</h3>
                                <p>@room.Description.Truncate(150)</p>

                                <div class="roomtype-description-tooltip" style="display: none;">
                                    @if(room.Thumbnails.Count() > 0)
                                    {
                                        <div style="padding: 8px;">
                                        <img src="@room.Thumbnails.First()" width="250" height="155" alt="" />
                                        </div>
                                    }                                    
                                    <div style="padding: 8px; padding-top: 0px; text-align: left;">@room.Description</div>
                                </div>

                                <div class="row">
                                    <div class="span2" style="width: 128px;">
                                
                                        <select name="Items[@i].Quantity" style="width: 128px;">
                                          <option value="" data-price="0">Select.. </option>

                                          @for (var n = 1; n <= room.AvailableQuantity; n++)
                                          {
                                              var price = room.TotalPrice * n;
                                              if (n == 1)
                                              {
                                                  <option value="@n" data-price="@price">1 room</option>
                                              }
                                              else
                                              {
                                                  <option value="@n" data-price="@price">@n rooms</option>
                                              }
                                          }
                                        </select>                                

                                    </div>
                                    <div class="span2 align-right" style="width: 128px;">
                                        DKK @room.TotalPrice
                                    </div>
                                </div>
                            </div>                            
                            }

                        }
                        </div>
                        <br />
                        <div class="row">
                            <div class="span2" style="width: 128px;">
                                Total Price
                            </div>
                            <div id="total-reservation-price" class="span2 align-right" style="width: 128px;">
                                DKK 0.00
                            </div>
                        </div>
                        <br /><br />
                        <center>
                            <a id="btn-reservate" class="btn btn-large btn-success disabled">Reservate now</a>
                        </center>  
                    </form>                  
                }
            </div>

        </div>
    </div>
</div>